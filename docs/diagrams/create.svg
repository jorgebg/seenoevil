<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="567px" preserveAspectRatio="none" style="width:955px;height:567px;" version="1.1" viewBox="0 0 955 567" width="955px" zoomAndPan="magnify"><defs><filter height="300%" id="f1h1ycwiwx4u1z" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1h1ycwiwx4u1z)" height="87.5762" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="166" y="117.7988"/><rect fill="#FFFFFF" filter="url(#f1h1ycwiwx4u1z)" height="302.8613" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="166" y="234.6855"/><rect fill="#FFFFFF" filter="url(#f1h1ycwiwx4u1z)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="526" y="146.9316"/><rect fill="#FFFFFF" filter="url(#f1h1ycwiwx4u1z)" height="144.8418" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="526" y="321.084"/><rect fill="#FFFFFF" filter="url(#f1h1ycwiwx4u1z)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="910" y="350.2168"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="26" x2="26" y1="86.4883" y2="555.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="171" x2="171" y1="86.4883" y2="555.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="531" x2="531" y1="86.4883" y2="555.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="915" x2="915" y1="86.4883" y2="555.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="8" y="83.5352">user</text><ellipse cx="26" cy="13" fill="#FEFECE" filter="url(#f1h1ycwiwx4u1z)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26,21 L26,48 M13,29 L39,29 M26,48 L13,63 M26,48 L39,63 " fill="none" filter="url(#f1h1ycwiwx4u1z)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1h1ycwiwx4u1z)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="134" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="141" y="71.5352">browser</text><rect fill="#FEFECE" filter="url(#f1h1ycwiwx4u1z)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="501" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="508" y="71.5352">server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="62" x="881" y="83.5352">database</text><path d="M897,34 C897,24 915,24 915,24 C915,24 933,24 933,34 L933,60 C933,70 915,70 915,70 C915,70 897,70 897,60 L897,34 " fill="#FEFECE" filter="url(#f1h1ycwiwx4u1z)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M897,34 C897,44 915,44 915,44 C915,44 933,44 933,34 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1h1ycwiwx4u1z)" height="87.5762" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="166" y="117.7988"/><rect fill="#FFFFFF" filter="url(#f1h1ycwiwx4u1z)" height="302.8613" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="166" y="234.6855"/><rect fill="#FFFFFF" filter="url(#f1h1ycwiwx4u1z)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="526" y="146.9316"/><rect fill="#FFFFFF" filter="url(#f1h1ycwiwx4u1z)" height="144.8418" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="526" y="321.084"/><rect fill="#FFFFFF" filter="url(#f1h1ycwiwx4u1z)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="910" y="350.2168"/><polygon fill="#A80036" points="154,113.7988,164,117.7988,154,121.7988,158,117.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26" x2="160" y1="117.7988" y2="117.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="33" y="113.0566">open app</text><polygon fill="#A80036" points="514,142.9316,524,146.9316,514,150.9316,518,146.9316" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="176" x2="520" y1="146.9316" y2="146.9316"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="183" y="141.8657">HTTP GET /</text><polygon fill="#A80036" points="187,172.0645,177,176.0645,187,180.0645,183,176.0645" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="181" x2="530" y1="176.0645" y2="176.0645"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="193" y="170.9985">create.html</text><polygon fill="#A80036" points="37,201.375,27,205.375,37,209.375,33,205.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="31" x2="170" y1="205.375" y2="205.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="43" y="200.6328">show form</text><polygon fill="#A80036" points="154,230.6855,164,234.6855,154,238.6855,158,234.6855" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="26" x2="160" y1="234.6855" y2="234.6855"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="33" y="229.9434">send</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="67" y="229.6196">data</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="176" x2="218" y1="278.9512" y2="278.9512"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="218" x2="218" y1="278.9512" y2="291.9512"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="177" x2="218" y1="291.9512" y2="291.9512"/><polygon fill="#A80036" points="187,287.9512,177,291.9512,187,295.9512,183,291.9512" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="183" y="258.7524">client_key = random_key()</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="183" y="273.8853">encrypted_data = encrypt(data, client_key)</text><polygon fill="#A80036" points="514,317.084,524,321.084,514,325.084,518,321.084" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="176" x2="520" y1="321.084" y2="321.084"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="183" y="316.0181">HTTP POST / encrypted_data</text><polygon fill="#A80036" points="898,346.2168,908,350.2168,898,354.2168,902,350.2168" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="536" x2="904" y1="350.2168" y2="350.2168"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="543" y="345.1509">INSERT INTO secret VALUES encrypted_data</text><polygon fill="#A80036" points="547,375.3496,537,379.3496,547,383.3496,543,379.3496" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="541" x2="914" y1="379.3496" y2="379.3496"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="553" y="374.2837">secret</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="536" x2="578" y1="423.793" y2="423.793"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="578" x2="578" y1="423.793" y2="436.793"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="537" x2="578" y1="436.793" y2="436.793"/><polygon fill="#A80036" points="547,432.793,537,436.793,547,440.793,543,436.793" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="360" x="543" y="403.4165">token = safe_serialize(secret.id, server_key)</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="543" y="418.7271">base_url = "/secret/{token}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="759" y="419.0508">"</text><polygon fill="#A80036" points="187,461.9258,177,465.9258,187,469.9258,183,465.9258" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="181" x2="530" y1="465.9258" y2="465.9258"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="64" x="193" y="460.8599">base_url</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="176" x2="218" y1="495.2363" y2="495.2363"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="218" x2="218" y1="495.2363" y2="508.2363"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="177" x2="218" y1="508.2363" y2="508.2363"/><polygon fill="#A80036" points="187,504.2363,177,508.2363,187,512.2363,183,508.2363" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="183" y="490.1704">url = "{base_url}#{client_key}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="423" y="490.4941">"</text><polygon fill="#A80036" points="37,533.5469,27,537.5469,37,541.5469,33,537.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="31" x2="170" y1="537.5469" y2="537.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="43" y="532.8047">show</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="80" y="532.481">url</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="108" y="532.8047">to share</text><!--
@startuml
hide footbox

actor user
participant browser
participant server
database database

user -> browser ++    : open app
browser -> server ++  : ""HTTP GET /""
server - -> browser - - : ""create.html""
browser - -> user - -   : show form

user -> browser ++     : send ""data""
browser -> browser     : ""client_key = random_key()""\n""encrypted_data = encrypt(data, client_key)""
browser -> server ++   : ""HTTP POST / encrypted_data""
server -> database ++  : ""INSERT INTO secret VALUES encrypted_data""
database - -> server - - : ""secret""
server -> server       : ""token = safe_serialize(secret.id, server_key)""\n""base_url = "/secret/{token}"""
server - -> browser - -  : ""base_url""
browser -> browser     : ""url = "{base_url}#{client_key}"""
browser - -> user - -    : show ""url"" to share

@enduml

PlantUML version 1.2019.05(Sat Apr 20 18:45:36 CEST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 10.0.2+13
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>